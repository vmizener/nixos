from prompt_toolkit.key_binding import KeyBindings
from prompt_toolkit.keys import Keys

xontrib load abbrevs
xontrib load autovox
xontrib load jedi
xontrib load vox
xontrib load voxapi

xontrib load fzf-widgets
xontrib load prompt_vi_mode
xontrib load sh

$EDITOR = "nvim"

$XONSH_COLOR_STYLE = "solarized-light"
$XONSH_STYLE_OVERRIDES = {
    "BACKGROUND_BLACK": "bg:#343434 #ccc",
    "Token.Error": "#bf3434",
    "Token.PTK.Aborting": "#646e7d",
    "Token.PTK.AutoSuggestion": "#646e7d",
}
$PROMPT = \
    "{INTENSE_BLACK}{user}{YELLOW}@{INTENSE_BLACK}{hostname} " \
    + "{INTENSE_WHITE}{cwd}" \
    + "{RESET}\n{prompt_end} "
$RIGHT_PROMPT = \
    "{gitstatus} " \
    + "{INTENSE_BLACK}{localtime}"

$fzf_history_binding = Keys.ControlR

@events.on_ptk_create
def custom_keybindings(bindings, **kw):
    @bindings.add(Keys.ControlSpace)
    def _(event):
        """
        Accepts the auto-suggestion.
        """
        buff = event.app.current_buffer
        if buff.suggestion:
            event.current_buffer.insert_text(buff.suggestion.text)

aliases["cat"] = "bat"
aliases["suspend"] = "systemctl suspend"
abbrevs["cdr"] = "cd $(git rev-parse --show-toplevel)"
abbrevs["ll"] = "ls -l"
abbrevs["la"] = "ls -al"
abbrevs["nhs"] = "nh os switch /etc/nixos"
abbrevs["nhus"] = "nh os switch -u /etc/nixos"
abbrevs["ns"] = "nix search nixpkgs"

# vim: set filetype=python:
